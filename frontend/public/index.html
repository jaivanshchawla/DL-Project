<!DOCTYPE html>
<script>
// ULTRA-EARLY ERROR SUPPRESSION - Runs before HTML parsing
(function() {
  'use strict';
  
  // List of patterns to suppress
  const suppressPatterns = /manifest|runtime\.lastError|content\.js|contentscript|inject\.js|chrome-extension|moz-extension|safari-extension|edge-extension|code:\s*403|httpError|httpStatus:\s*200|name:\s*['"]i['"]|message port closed|Extension context|Syntax error|Failed to load resource|CORS policy|chrome\.runtime|browser\.runtime/i;
  
  // Immediately override console methods
  const methods = ['error', 'warn', 'log', 'trace', 'debug', 'info'];
  const originals = {};
  
  methods.forEach(m => {
    originals[m] = console[m] || function() {};
    console[m] = function(...args) {
      try {
        const str = args.map(a => {
          if (a === null || a === undefined) return '';
          if (typeof a === 'object') {
            try { return JSON.stringify(a); } catch { return '[object]'; }
          }
          return String(a);
        }).join(' ');
        
        if (!suppressPatterns.test(str)) {
          originals[m].apply(console, args);
        }
      } catch {
        // Silently fail
      }
    };
  });
  
  // Override window.onerror immediately
  window.onerror = function(msg, src, line, col, err) {
    const errorStr = [msg, src, err && err.stack].filter(Boolean).join(' ');
    return suppressPatterns.test(errorStr);
  };
  
  // Add error event listener in capture phase
  window.addEventListener('error', function(e) {
    try {
      const errorStr = [e.message, e.filename, e.error && e.error.stack].filter(Boolean).join(' ');
      if (suppressPatterns.test(errorStr)) {
        e.preventDefault();
        e.stopPropagation();
        e.stopImmediatePropagation();
        return false;
      }
    } catch {
      // Suppress errors in error handler
      e.preventDefault();
      return false;
    }
  }, true);
  
  // Promise rejection handler
  window.addEventListener('unhandledrejection', function(e) {
    try {
      const reasonStr = e.reason ? 
        (typeof e.reason === 'object' ? JSON.stringify(e.reason) : String(e.reason)) : 
        '';
      if (suppressPatterns.test(reasonStr)) {
        e.preventDefault();
        e.stopPropagation();
        e.stopImmediatePropagation();
        return false;
      }
    } catch {
      e.preventDefault();
      return false;
    }
  }, true);
})();
</script>
<html lang="en">

<head>
  <script>
    // Ultra-robust dynamic error suppression system
    (function() {
      'use strict';
      
      // Dynamic error detection system
      const ErrorSuppressor = {
        // Store original methods
        originals: {
          error: console.error,
          warn: console.warn,
          log: console.log,
          trace: console.trace,
          debug: console.debug,
          info: console.info,
          onError: window.onerror
        },
        
        // Dynamic patterns that learn from errors
        patterns: new Set([
          // Extension patterns
          'chrome-extension://',
          'moz-extension://',
          'safari-extension://',
          'edge-extension://',
          'extension://',
          
          // File patterns
          'content.js',
          'contentscript.js',
          'inject.js',
          'content_script.js',
          'background.js',
          
          // Error messages - MORE SPECIFIC
          'Unchecked runtime.lastError',
          'runtime.lastError',
          'The message port closed',
          'message port closed before a response',
          'Extension context invalidated',
          'Manifest: Line:',
          'Manifest.*Syntax error',
          'manifest.json:1',
          'Syntax error',
          
          // Codes and statuses
          'code: 403',
          'httpStatus: 200',
          'httpError: false',
          "name: 'i'",
          'name: "i"',
          
          // Stack patterns
          'at chrome.runtime',
          'at browser.runtime',
          'chrome.runtime.sendMessage',
          'chrome.runtime.connect',
          
          // CORS/Network
          'Access to.*blocked',
          'Failed to load resource',
          'CORS policy'
        ]),
        
        // Learning system - detect new patterns
        learnPattern(str) {
          // Extract potential patterns from error strings
          const extractors = [
            /([a-zA-Z_-]+\.js):\d+/g,  // JS files with line numbers
            /at\s+(\S+)\s+\(/g,         // Function names in stack traces
            /(chrome|browser|moz)\.\w+\.\w+/g,  // Browser API calls
            /\w+Error:\s*(.{0,50})/g,   // Error types and messages
          ];
          
          extractors.forEach(regex => {
            let match;
            while ((match = regex.exec(str)) !== null) {
              if (match[1] && match[1].length > 3) {
                this.patterns.add(match[1]);
              }
            }
          });
        },
        
        // Intelligent suppression check
        shouldSuppress(input) {
          // Convert input to searchable string
          let searchStr = '';
          try {
            if (typeof input === 'string') {
              searchStr = input;
            } else if (input instanceof Error) {
              searchStr = input.toString() + ' ' + (input.stack || '');
            } else if (Array.isArray(input)) {
              searchStr = input.map(arg => this.stringify(arg)).join(' ');
            } else if (typeof input === 'object' && input !== null) {
              searchStr = JSON.stringify(input);
            } else {
              searchStr = String(input);
            }
          } catch (e) {
            // If stringification fails, it's likely an extension object
            return true;
          }
          
          // Check against all patterns
          for (const pattern of this.patterns) {
            if (searchStr.includes(pattern)) {
              this.learnPattern(searchStr); // Learn from this error
              return true;
            }
          }
          
          // Advanced checks for complex error objects
          if (searchStr.includes('{') && searchStr.includes('}')) {
            // Check for specific error object patterns
            const errorObjPatterns = [
              /"name"\s*:\s*"i"/,
              /'name'\s*:\s*'i'/,
              /code\s*:\s*403/,
              /httpError\s*:\s*false/,
              /httpStatus\s*:\s*200.*code\s*:\s*403/
            ];
            
            for (const pattern of errorObjPatterns) {
              if (pattern.test(searchStr)) {
                return true;
              }
            }
          }
          
          return false;
        },
        
        // Safe stringify helper
        stringify(obj) {
          try {
            if (obj === null || obj === undefined) return String(obj);
            if (typeof obj === 'string') return obj;
            if (obj instanceof Error) {
              return obj.toString() + ' ' + (obj.stack || '');
            }
            if (typeof obj === 'object') {
              // Handle circular references
              const seen = new WeakSet();
              return JSON.stringify(obj, (key, value) => {
                if (typeof value === 'object' && value !== null) {
                  if (seen.has(value)) return '[Circular]';
                  seen.add(value);
                }
                return value;
              });
            }
            return String(obj);
          } catch (e) {
            return '[Unstringifiable]';
          }
        },
        
        // Initialize the suppression system
        init() {
          const self = this;
          
          // Override console methods
          ['error', 'warn', 'log', 'trace', 'debug', 'info'].forEach(method => {
            if (console[method] && self.originals[method]) {
              console[method] = function(...args) {
                if (!self.shouldSuppress(args)) {
                  self.originals[method].apply(console, args);
                }
              };
            }
          });
          
          // Global error handler
          window.onerror = function(message, source, lineno, colno, error) {
            const errorInfo = [message, source, error?.stack].filter(Boolean);
            if (self.shouldSuppress(errorInfo)) {
              return true;
            }
            return self.originals.onError ? 
              self.originals.onError(message, source, lineno, colno, error) : 
              false;
          };
          
          // Error event listener (capture phase)
          window.addEventListener('error', function(e) {
            const errorInfo = [
              e.message,
              e.filename,
              e.error?.stack,
              e.error?.toString()
            ].filter(Boolean);
            
            if (self.shouldSuppress(errorInfo)) {
              e.preventDefault();
              e.stopPropagation();
              e.stopImmediatePropagation();
              return false;
            }
          }, true);
          
          // Promise rejection handler
          window.addEventListener('unhandledrejection', function(e) {
            try {
              const reason = e.reason;
              if (self.shouldSuppress(reason)) {
                e.preventDefault();
                e.stopPropagation();
                e.stopImmediatePropagation();
                return false;
              }
            } catch (err) {
              // Suppress errors in the error handler itself
              return false;
            }
          }, true);
          
          // Mutation observer to remove extension scripts
          if (typeof MutationObserver !== 'undefined') {
            const observer = new MutationObserver(function(mutations) {
              mutations.forEach(function(mutation) {
                mutation.addedNodes.forEach(function(node) {
                  if (node.tagName === 'SCRIPT' && node.src) {
                    for (const pattern of self.patterns) {
                      if (node.src.includes(pattern)) {
                        node.remove();
                        break;
                      }
                    }
                  }
                });
              });
            });
            
            // Start observing
            const startObserving = function() {
              observer.observe(document.documentElement || document, {
                childList: true,
                subtree: true
              });
            };
            
            if (document.documentElement) {
              startObserving();
            } else {
              setTimeout(startObserving, 0);
            }
          }
          
          // Override fetch for network errors
          if (window.fetch) {
            const originalFetch = window.fetch;
            window.fetch = function(...args) {
              return originalFetch.apply(window, args).catch(function(error) {
                if (self.shouldSuppress(error)) {
                  return new Response('{}', { 
                    status: 200,
                    headers: new Headers({ 'content-type': 'application/json' })
                  });
                }
                throw error;
              });
            };
          }
          
          // Override XMLHttpRequest
          const OriginalXHR = window.XMLHttpRequest;
          window.XMLHttpRequest = function() {
            const xhr = new OriginalXHR();
            const originalOpen = xhr.open;
            
            xhr.open = function(method, url, ...args) {
              if (self.shouldSuppress(url)) {
                // Don't actually make the request
                return;
              }
              return originalOpen.call(xhr, method, url, ...args);
            };
            
            return xhr;
          };
          XMLHttpRequest.prototype = OriginalXHR.prototype;
        }
      };
      
      // Initialize immediately
      ErrorSuppressor.init();
      
      // Also store globally for debugging if needed
      window.__errorSuppressor = ErrorSuppressor;
    })();
  </script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="theme-color" content="#1e3a8a" />
  <title>Connect Four AI</title>
  <link rel="manifest" href="/manifest.json" />
  <link rel="apple-touch-icon" href="/logo192.png" />
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22><defs><style>.board{fill:%232563eb}.hole{fill:%23f8fafc}.piece-red{fill:%23ef4444}.piece-yellow{fill:%23fbbf24}.falling{animation:fall 2s ease-in-out infinite}.glow{animation:glow 3s ease-in-out infinite alternate}@keyframes fall{0%25{transform:translateY(-8px);opacity:0.7}50%25{transform:translateY(0px);opacity:1}100%25{transform:translateY(-8px);opacity:0.7}}@keyframes glow{0%25{filter:drop-shadow(0 0 2px %23fbbf24)}100%25{filter:drop-shadow(0 0 4px %23ef4444)}}</style></defs><rect width=%2224%22 height=%2224%22 class=%22board%22 rx=%223%22/><circle cx=%226%22 cy=%226%22 r=%222%22 class=%22hole%22/><circle cx=%2212%22 cy=%226%22 r=%222%22 class=%22hole%22/><circle cx=%2218%22 cy=%226%22 r=%222%22 class=%22hole%22/><circle cx=%226%22 cy=%2212%22 r=%222%22 class=%22hole%22/><circle cx=%2212%22 cy=%2212%22 r=%222%22 class=%22hole%22/><circle cx=%2218%22 cy=%2212%22 r=%222%22 class=%22hole%22/><circle cx=%226%22 cy=%2218%22 r=%222%22 class=%22hole%22/><circle cx=%2212%22 cy=%2218%22 r=%222%22 class=%22hole%22/><circle cx=%2218%22 cy=%2218%22 r=%222%22 class=%22hole%22/><circle cx=%226%22 cy=%2218%22 r=%221.8%22 class=%22piece-yellow falling%22/><circle cx=%2212%22 cy=%2212%22 r=%221.8%22 class=%22piece-red glow%22/><circle cx=%2218%22 cy=%2218%22 r=%221.8%22 class=%22piece-yellow%22/><circle cx=%2212%22 cy=%2218%22 r=%221.8%22 class=%22piece-red%22/></svg>">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    @keyframes bounce {
      0% {
        transform: translateY(-20px);
      }

      60% {
        transform: translateY(5px);
      }

      100% {
        transform: translateY(0);
      }
    }

    @keyframes boardFadeIn {
      0% {
        opacity: 0;
        transform: translateY(10px);
      }

      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes glow {
      0% {
        box-shadow: 0 0 8px 4px rgba(6, 214, 160, 0.7);
      }

      100% {
        box-shadow: 0 0 12px 6px rgba(6, 214, 160, 1);
      }
    }

    @keyframes fadeText {
      0% {
        opacity: 0;
      }

      100% {
        opacity: 1;
      }
    }

    .fade-in {
      animation: boardFadeIn 0.5s ease-out;
    }

    .bounce {
      animation: bounce 0.4s ease-out;
    }

    .glow {
      animation: glow 1s ease-in-out infinite alternate;
      border: 4px solid #06d6a0;
    }

    .fade-text {
      animation: fadeText 0.5s ease-in-out;
    }

    @keyframes drop {
      0% {
        transform: translateY(-200%);
      }

      100% {
        transform: translateY(0);
      }
    }

    .drop {
      animation: drop 0.4s ease-out;
    }

    @keyframes slideDown {
      0% {
        transform: translateY(-100%) scale(0.8);
        opacity: 0;
      }

      60% {
        transform: translateY(10%) scale(1.05);
        opacity: 1;
      }

      100% {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
    }

    .slide-down {
      animation: slideDown 0.6s ease-out;
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.1);
      }

      100% {
        transform: scale(1);
      }
    }

    .pulse {
      animation: pulse 1s ease-in-out infinite;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    .spin {
      animation: spin 0.6s linear;
    }

    @keyframes slotPulse {
      0% {
        border-color: #26418f;
      }

      50% {
        border-color: #118ab2;
      }

      100% {
        border-color: #26418f;
      }
    }

    .slot-pulse {
      animation: slotPulse 2s ease-in-out infinite;
    }

    @keyframes gradientBG {
      0% {
        background-position: 0% 50%;
      }

      50% {
        background-position: 100% 50%;
      }

      100% {
        background-position: 0% 50%;
      }
    }

    .title-gradient {
      background: linear-gradient(270deg, #06d6a0, #118ab2, #ef476f, #ffd166);
      background-size: 800% 800%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: gradientBG 6s ease infinite;
    }

    @keyframes wiggle {

      0%,
      100% {
        transform: rotate(-2deg);
      }

      50% {
        transform: rotate(2deg);
      }
    }

    .hover-wiggle:hover {
      animation: wiggle 0.6s ease-in-out infinite;
    }

    @keyframes float {

      0%,
      100% {
        transform: translateY(0);
      }

      50% {
        transform: translateY(-10px);
      }
    }

    .title-float {
      animation: float 4s ease-in-out infinite;
    }

    @keyframes boardGradient {
      0% {
        background-color: #1e2a47;
      }

      50% {
        background-color: #26418f;
      }

      100% {
        background-color: #1e2a47;
      }
    }

    @keyframes boardFloat {

      0%,
      100% {
        transform: translateY(0);
      }

      50% {
        transform: translateY(5px);
      }
    }

    .board-bg {
      animation: boardGradient 8s ease-in-out infinite;
    }

    .board-float {
      animation: boardFloat 6s ease-in-out infinite;
      transform-style: preserve-3d;
    }

    .board-tilt {
      perspective: 800px;
    }

    .board-tilt .board-bg {
      transform-style: preserve-3d;
      transition: transform 0.3s ease-out;
    }

    .board-tilt:hover .board-bg {
      transform: rotateX(10deg) rotateY(-10deg);
    }

    @keyframes slideInRight {
      0% {
        transform: translateX(100%);
      }

      100% {
        transform: translateX(0);
      }
    }

    @keyframes slideOutRight {
      0% {
        transform: translateX(0);
      }

      100% {
        transform: translateX(100%);
      }
    }

    .sidebar {
      position: fixed;
      top: 0;
      right: 0;
      height: 100%;
      width: 280px;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      overflow-y: auto;
      transform: translateX(100%);
      z-index: 1000;
    }

    .sidebar.open {
      animation: slideInRight 0.3s ease-out forwards;
    }

    .sidebar.closed {
      animation: slideOutRight 0.3s ease-in forwards;
    }

    .fade-text {
      animation: fadeText 0.5s ease-in-out;
    }

    /* Mobile-specific styles */
    @media (max-width: 768px) {
      /* Prevent text selection and improve touch */
      body {
        -webkit-touch-callout: none;
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
        overscroll-behavior: contain;
      }
      
      /* Make touch targets larger */
      button {
        min-height: 44px;
        min-width: 44px;
      }
      
      /* Improve scrolling performance */
      * {
        -webkit-overflow-scrolling: touch;
      }
      
      /* Prevent double-tap zoom on buttons */
      button, a, input, select, textarea {
        touch-action: manipulation;
      }
    }

    /* Prevent overscroll bounce on iOS */
    html {
      position: fixed;
      height: 100%;
      width: 100%;
      overflow: hidden;
    }
    
    body {
      height: 100%;
      width: 100%;
      overflow: auto;
      -webkit-overflow-scrolling: touch;
    }
  </style>
</head>

<body>
  <div id="root" style="position: relative;"></div>

</body>

</html>